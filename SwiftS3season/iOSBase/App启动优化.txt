#  App启动优化.exp
#  SwiftS3season
#
#  Created by season on 2021/8/7.
#  

// MARK: App启动

// 冷启动是指， App 点击启动前，它的进程不在系统里，需要系统新创建一个进程分配给它启动的情况。这是一次完整的启动过程。
// 热启动是指 ，App 在冷启动后用户将 App 退后台，在 App 的进程还在系统里的情况下，用户重新启动进入 App 的过程，这个过程做的事情非常少。

// TODO: 冷启动流程：

1, main函数执行之前：
    
(1)加载可执行文件（App 的.o 文件的集合）；
(2)加载动态链接库，进行 rebase 指针调整和 bind 符号绑定；
(3)Objc 运行时的初始处理，包括 Objc 相关类的注册、category 注册、selector 唯一性检查等；
(4)初始化，包括了执行 +load() 方法、attribute((constructor)) 修饰的函数的调用、创建 C++ 静态全局变量。

//TODO: 此阶段可以做的优化
① 减少动态库加载。每个库本身都有依赖关系，苹果公司建议使用更少的动态库，并且建议在使用动态库的数量较多时，尽量将多个动态库进行合并。数量上，苹果公司建议最多使用 6 个非系统动态库。
② 减少加载启动后不会去使用的类或者方法。
③ +load() 方法里的内容可以放到首屏渲染完成后再执行，或使用 +initialize() 方法替换掉。因为，在一个 +load() 方法里，进行运行时方法替换操作会带来 4 毫秒的消耗。不要小看这 4 毫秒，积少成多，执行 +load() 方法对启动速度的影响会越来越大。
④ 控制 C++ 全局变量的数量。

2，main() 函数执行后

过程： main() 函数执行后的阶段，指的是从 main() 函数执行开始，到 appDelegate 的 didFinishLaunchingWithOptions 方法里首屏渲染相关方法执行完成。

// 影响这过程的操作
首屏初始化所需配置文件的读写操作；
首屏列表大数据的读取；
首屏渲染的大量计算等。
